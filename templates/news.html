{% load staticfiles %}
<!doctype html>
<html>
	<head>
		<meta name="generator" content="Django 2.2.5">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
		<meta name="description" content="">
		<meta name="keyword" content="">
		<link rel="shortcut icon" type="image/ico" href="">
		<title>CTRL</title>
		<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
		<link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
		<link rel="stylesheet" href="{% static "style.css" %}">
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
	</head>
	<body>
		<header class="header fixed-header">
			<div class="header-container">
				<a class="home-link" href="/">
					<div class="logo"></div>
					<span>CTRL</span>
				</a>
				<ul class="right-list">
					<li class="list-item"><a href="/" class="item-link">主页</a></li>
					<li class="list-item"><a href="/news/" class="item-link">动态</a></li>
					<li class="list-item"><a href="/about/" class="item-link">关于</a></li>
				</ul>
				<div class="menu">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</div>
				<div class="menu-mask">
					<ul class="menu-list">
						<li class="menu-item"><a href="/" class="menu-link">Home</a></li>
						<li class="menu-item"><a href="/tags/" class="menu-link">Tags</a></li>
						<li class="menu-item"><a href="/archives/" class="menu-link">Archives</a></li>
						<li class="menu-item"><a href="/project/" class="menu-link">Projects</a></li>
						<li class="menu-item"><a href="/friends/" class="menu-link">Friends</a></li>
						<li class="menu-item"><a href="/about/" class="menu-link">About</a></li>
					</ul>
				</div>
			</div>
		</header>
		<div id="article-banner">
			<h2>{{ title }}</h2>
			<p class="post-date">{{ published_time | date:"Y年n月j日 G:i:s" }}</p>
			<div class="arrow-down"><a href="javascript:;"></a></div>
		</div>
		<main class="app-body flex-box">
			<!-- Article START -->
			<article class="post-article">
				<section class="news-entry">
					<img src="{{ image_url }}"></img>
					{{ content | safe }}
				</section>
				<!-- Tags START -->
				<!--div class="tags">
					<span>标签：</span>
					<a href="/tags#PHP"><span class="tag-code">PHP</span></a>
					<a href="/tags#VPS"><span class="tag-code">VPS</span></a>
					<a href="/tags#Isso"><span class="tag-code">Isso</span></a>
				</div-->
				<!-- Tags END -->
				<!-- NAV START -->
				<div class="nav-container">
					来源：{{ source | safe }}
					<!-- reverse left and right to put prev and next in a more logic postition -->
					<!--a class="nav-left" href="/posts/remove-file-preview-web-learning-2018/">
						<span class="nav-arrow">← </span>
						屏蔽网络学堂文件预览
					</a-->
				</div>
				<!-- NAV END -->
			</article>
			<!-- Article END -->
			<!-- Catalog START -->
			<aside class="catalog-container">
				<div class="toc-main">
					<!--strong class="toc-title">目录</strong>
					<ol class="toc-nav">
						<li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#部署-VPS"><span
									class="toc-nav-text">部署 VPS</span></a></li>
						<li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Apache-配置"><span
									class="toc-nav-text">Apache 配置</span></a></li>
						<li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#SSL-证书"><span
									class="toc-nav-text">SSL 证书</span></a></li>
						<li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Isso-评论系统配置"><span
									class="toc-nav-text">Isso 评论系统配置</span></a></li>
					</ol-->
				</div>
			</aside>
			<!-- Catalog END -->
		</main>

		<script>
			(function () {
				var url = '{{ url }}';
				var banner = ''
				if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
					$('#article-banner').css({
						'background-image': 'url(' + banner + ')'
					})
				} else {
					$('#article-banner').geopattern(url)
				}
				$('.header').removeClass('fixed-header')

				// error image
				$("img").on('error', function () {
					$(this).attr('src', 'http://file.muyutech.com/error-img.png')
					$(this).css({
						'cursor': 'default'
					})
				})

				// zoom image
				$("img").on('click', function () {
					var src = $(this).attr('src')
					if (src !== 'http://file.muyutech.com/error-img.png') {
						var imageW = $(this).width()
						var imageH = $(this).height()

						var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
						zoom = zoom < 1 ? 1 : zoom
						zoom = zoom > 2 ? 2 : zoom
						var transY = (($(window).height() - imageH) / 2).toFixed(2)

						$('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="' + src + '" /></div></div>')
						$('.image-view-wrap').addClass('wrap-active')
						$('.image-view-wrap img').css({
							'width': `${imageW}`,
							'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
						})
						$('html').css('overflow', 'hidden')

						$('.image-view-wrap').on('click', function () {
							$(this).remove()
							$('html').attr('style', '')
						})
					}
				})
			})();
		</script>
		<div class="scroll-top">
			<span class="arrow-icon"></span>
		</div>
		<footer class="app-footer">
			<p class="copyright">
				&copy; 2014 - 2019 <a href="https://github.com/Chrogeek">Chrogeek</a> | 由 <a href="https://www.djangoproject.com/">Django</a> 强力驱动 | <a href="https://github.com/Chrogeek/CTRL/">网站源代码</a>
				<br>
				本站所有内容由自动爬网程序抓取。我们不对抓取的内容负责。
			</p>
		</footer>
		<script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
		<!--script src="/js/server-time.js"></script-->
		<script>
			function async(u, c) {
				var d = document, t = 'script',
					o = d.createElement(t),
					s = d.getElementsByTagName(t)[0];
				o.src = u;
				if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
				s.parentNode.insertBefore(o, s);
			}
		</script>
		<script>
			async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
				FastClick.attach(document.body);
			})
		</script>
		<script src="{% static "script.js" %}"></script>
	</body>
</html>
